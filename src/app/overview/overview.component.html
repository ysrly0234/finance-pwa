<div class="overview-container">
    <div class="header-section">
        <h1>סקירה כללית</h1>
        <!-- Optional: Add generic actions or date info -->
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards">
        <div class="card income">
            <div class="icon-wrapper">
                <mat-icon>trending_up</mat-icon>
            </div>
            <div class="content">
                <div class="label">הכנסות החודש</div>
                <div class="value">{{ currentMonthStats().income | currency:'ILS':'symbol':'1.0-0' }}</div>
            </div>
            <button mat-mini-fab class="action-btn" (click)="quickAddTransaction('income')" title="הוספת הכנסה">
                <mat-icon>add</mat-icon>
            </button>
        </div>

        <div class="card expense">
            <div class="icon-wrapper">
                <mat-icon>trending_down</mat-icon>
            </div>
            <div class="content">
                <div class="label">הוצאות החודש</div>
                <div class="value">{{ currentMonthStats().expense | currency:'ILS':'symbol':'1.0-0' }}</div>
            </div>
            <button mat-mini-fab class="action-btn" (click)="quickAddTransaction('expense')" title="הוספת הוצאה">
                <mat-icon>add</mat-icon>
            </button>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-grid">
        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>הכנסות מול הוצאות (חצי שנה)</mat-card-title>
                <span class="spacer"></span>
                <button mat-icon-button (click)="goToTransactions()" title="לכל התנועות">
                    <mat-icon>list_alt</mat-icon>
                </button>
            </mat-card-header>
            <mat-card-content>
                <div class="canvas-container">
                    <canvas baseChart [data]="barChartData()" [options]="barChartOptions" [type]="barChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="chart-card">
            <mat-card-header>
                <mat-card-title>הוצאות לפי תקציב (החודש)</mat-card-title>
                <span class="spacer"></span>
                <button mat-icon-button (click)="goToBudgets()" title="ניהול תקציבים">
                    <mat-icon>settings</mat-icon>
                </button>
            </mat-card-header>
            <mat-card-content>
                <div class="canvas-container">
                    <canvas baseChart [data]="pieChartData()" [options]="pieChartOptions" [type]="pieChartType">
                    </canvas>
                </div>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- Recent Transactions -->
    <div class="recent-section">
        <div class="section-header">
            <h3>פעולות אחרונות</h3>
            <button mat-button color="primary" (click)="goToTransactions()">לכל הפעולות</button>
        </div>
        <div class="transactions-list">
            @for (t of recentTransactions(); track t.id) {
            <div class="transaction-item">
                <div class="icon" [class.expense]="isExpense(t)" [class.income]="!isExpense(t)">
                    <mat-icon>{{ isExpense(t) ? 'shopping_cart' : 'savings' }}</mat-icon>
                </div>
                <div class="details">
                    <div class="desc">{{ t.description }}</div>
                    <div class="date">{{ getDate(t) | date:'dd/MM/yyyy' }}</div>
                </div>
                <div class="amount" [class.expense-text]="isExpense(t)" [class.income-text]="!isExpense(t)">
                    {{ isExpense(t) ? '-' : '+' }}{{ t.amount | currency:'ILS':'symbol':'1.0-0' }}
                </div>
            </div>
            } @empty {
            <div class="empty-state">אין פעולות אחרונות להצגה</div>
            }
        </div>
    </div>
</div>